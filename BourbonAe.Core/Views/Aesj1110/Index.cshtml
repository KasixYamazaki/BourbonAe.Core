@model BourbonAe.Core.Models.AESJ1110.Aesj1110PageViewModel
@{
    ViewData["Title"] = "AESJ1110";
}
<h1 class="h4 mb-3">AESJ1110</h1>
@if (TempData["Message"] is string msg)
{
    <div class="alert alert-success">@msg</div>
}
<form asp-action="Index" method="get" class="card p-3 mb-3 shadow-sm">
  <div class="row g-3 align-items-end">
    <div class="col-md-3">
      <label asp-for="Filter.CustomerCode" class="form-label"></label>
      <input asp-for="Filter.CustomerCode" class="form-control" />
    </div>
    <div class="col-md-3">
      <label asp-for="Filter.FromDate" class="form-label"></label>
      <input asp-for="Filter.FromDate" class="form-control" type="date" />
    </div>
    <div class="col-md-3">
      <label asp-for="Filter.ToDate" class="form-label"></label>
      <input asp-for="Filter.ToDate" class="form-control" type="date" />
    </div>
    <div class="col-md-3">
      <label asp-for="Filter.Status" class="form-label"></label>
      <select asp-for="Filter.Status" class="form-select">
        <option value="">(すべて)</option>
        <option>未確定</option>
        <option>確定</option>
      </select>
    </div>
  </div>
  <div class="mt-3 d-flex gap-2">
    <button type="submit" class="btn btn-primary">検索</button>
    <a asp-action="Index" class="btn btn-outline-secondary">クリア</a>
  </div>
</form>
<form asp-action="Index" method="post" class="card p-3 shadow-sm">
  @Html.AntiForgeryToken()
  <div class="table-responsive">
    <table class="table table-sm table-hover align-middle">
      <thead>
        <tr>
          <th style="width:2rem;"></th>
          <th>@Html.DisplayNameFor(m => m.Rows[0].SlipNo)</th>
          <th>@Html.DisplayNameFor(m => m.Rows[0].CustomerCode)</th>
          <th>@Html.DisplayNameFor(m => m.Rows[0].CustomerName)</th>
          <th>@Html.DisplayNameFor(m => m.Rows[0].Date)</th>
          <th class="text-end">@Html.DisplayNameFor(m => m.Rows[0].Amount)</th>
          <th>@Html.DisplayNameFor(m => m.Rows[0].Status)</th>
        </tr>
      </thead>
      <tbody>
      @if (Model.Rows?.Count > 0)
      {
          foreach (var row in Model.Rows)
          {
              <tr>
                <td><input type="checkbox" name="SelectedSlipNos" value="@row.SlipNo" /></td>
                <td>@row.SlipNo</td>
                <td>@row.CustomerCode</td>
                <td>@row.CustomerName</td>
                <td>@row.Date.ToString("yyyy-MM-dd")</td>
                <td class="text-end">@row.Amount.ToString("N0")</td>
                <td>@row.Status</td>
              </tr>
          }
      }
      else
      {
          <tr><td colspan="7" class="text-center text-muted">データがありません</td></tr>
      }
      </tbody>
    </table>
  </div>
  <input type="hidden" name="Filter.CustomerCode" value="@Model.Filter.CustomerCode" />
  <input type="hidden" name="Filter.FromDate" value="@(Model.Filter.FromDate?.ToString("yyyy-MM-dd"))" />
  <input type="hidden" name="Filter.ToDate" value="@(Model.Filter.ToDate?.ToString("yyyy-MM-dd"))" />
  <input type="hidden" name="Filter.Status" value="@Model.Filter.Status" />
  <div class="mt-3 d-flex gap-2">
    <button type="submit" class="btn btn-success">保存（例：選択行を確定）</button>
  </div>
</form>
@section Scripts {
  <!-- Optional: DataTables init etc. -->
}
